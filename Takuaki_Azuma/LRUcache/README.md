# LRU Cache å®Ÿè£…

LeetCodeå•é¡Œ146ã€ŒLRU Cacheã€ã®Pythonå®Ÿè£…

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã§ã¯ã€LRU Cacheã‚’2ã¤ã®æ–¹æ³•ã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ç†è§£ã¨Pythonã®æ›¸ãæ–¹ã‚’å­¦ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚

## ğŸ“š å­¦ç¿’ã®é€²ã‚æ–¹

1. **README.md** ã‚’èª­ã‚“ã§å•é¡Œã‚’ç†è§£ã™ã‚‹
2. **PYTHON_GUIDE.md** ã§Pythonã®æ›¸ãæ–¹ã‚’å­¦ã¶
3. **lru_cache_ordereddict.py** ã‹ã‚‰å§‹ã‚ã‚‹ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…ï¼‰
4. **lru_cache_doubly_linked.py** ã§ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’æ·±ãç†è§£ã™ã‚‹
5. **test_lru_cache.py** ã§å‹•ä½œã‚’ç¢ºèªã™ã‚‹

## å•é¡Œã®ç†è§£

LRU (Least Recently Used) Cacheã¯ã€ä»¥ä¸‹ã®åˆ¶ç´„ã‚’æŒã¤ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã§ã™ï¼š

1. **å®¹é‡åˆ¶é™**: æœ€å¤§`capacity`å€‹ã®ã‚­ãƒ¼ãƒ»ãƒãƒªãƒ¥ãƒ¼ãƒšã‚¢ã‚’ä¿æŒ
2. **O(1)æ™‚é–“è¨ˆç®—é‡**: `get`ã¨`put`æ“ä½œã¯å¹³å‡O(1)ã§å®Ÿè¡Œ
3. **LRUå‰Šé™¤**: å®¹é‡è¶…éæ™‚ã«æœ€ã‚‚å¤ãä½¿ã‚ã‚ŒãŸï¼ˆLeast Recently Usedï¼‰è¦ç´ ã‚’å‰Šé™¤

### ä¾‹

```
capacity = 2
cache = LRUCache(2)

cache.put(1, 1)  # cache = {1=1}
cache.put(2, 2)  # cache = {1=1, 2=2}
cache.get(1)     # 1ã‚’è¿”ã™ã€‚cache = {2=2, 1=1}ï¼ˆ1ãŒæœ€è¿‘ä½¿ã‚ã‚ŒãŸï¼‰
cache.put(3, 3)  # å®¹é‡è¶…éã€‚2ãŒå‰Šé™¤ã•ã‚Œã€cache = {1=1, 3=3}
cache.get(2)     # -1ã‚’è¿”ã™ï¼ˆ2ã¯å‰Šé™¤æ¸ˆã¿ï¼‰
```

## ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è€ƒãˆæ–¹

### æ–¹æ³•1: OrderedDictã‚’ä½¿ã†æ–¹æ³•ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ãƒ»æ¨å¥¨ï¼‰

Pythonã®`collections.OrderedDict`ã‚’ä½¿ã†ã¨ã€æŒ¿å…¥é †åºã‚’ä¿æŒã—ãªãŒã‚‰O(1)ã§æ“ä½œã§ãã¾ã™ã€‚

**ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ :**
- `get(key)`: ã‚­ãƒ¼ãŒå­˜åœ¨ã™ã‚Œã°å€¤ã‚’è¿”ã—ã€ãã®ã‚­ãƒ¼ã‚’æœ€å¾Œã«ç§»å‹•ï¼ˆæœ€è¿‘ä½¿ç”¨ï¼‰
- `put(key, value)`: ã‚­ãƒ¼ãŒå­˜åœ¨ã™ã‚Œã°æ›´æ–°ã—ã¦æœ€å¾Œã«ç§»å‹•ã€å­˜åœ¨ã—ãªã‘ã‚Œã°è¿½åŠ ã€‚å®¹é‡è¶…éæ™‚ã¯æœ€åˆã®è¦ç´ ã‚’å‰Šé™¤

**æ™‚é–“è¨ˆç®—é‡:** O(1)  
**ç©ºé–“è¨ˆç®—é‡:** O(capacity)

### æ–¹æ³•2: åŒæ–¹å‘é€£çµãƒªã‚¹ãƒˆ + ãƒãƒƒã‚·ãƒ¥ãƒãƒƒãƒ—ï¼ˆæ•™è‚²çš„ï¼‰

ã‚ˆã‚ŠåŸºæœ¬çš„ãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’çµ„ã¿åˆã‚ã›ã¦å®Ÿè£…ï¼š

- **ãƒãƒƒã‚·ãƒ¥ãƒãƒƒãƒ— (dict)**: O(1)ã§ã‚­ãƒ¼ã‹ã‚‰ãƒãƒ¼ãƒ‰ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹
- **åŒæ–¹å‘é€£çµãƒªã‚¹ãƒˆ**: ä½¿ç”¨é †åºã‚’ç®¡ç†ï¼ˆæœ€è¿‘ä½¿ã£ãŸã‚‚ã®ã‚’æœ«å°¾ã«ã€å¤ã„ã‚‚ã®ã‚’å…ˆé ­ã«ï¼‰

**ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ :**
- å„ãƒãƒ¼ãƒ‰ã¯å‰å¾Œã®å‚ç…§ã‚’æŒã¤
- headï¼ˆãƒ€ãƒŸãƒ¼ï¼‰â†’ æœ€ã‚‚å¤ã„è¦ç´  â†’ ... â†’ æœ€ã‚‚æ–°ã—ã„è¦ç´  â†’ tailï¼ˆãƒ€ãƒŸãƒ¼ï¼‰
- `get`: ãƒãƒ¼ãƒ‰ã‚’è¦‹ã¤ã‘ã¦æœ«å°¾ã«ç§»å‹•
- `put`: ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ /æ›´æ–°ã—ã¦æœ«å°¾ã«ç§»å‹•ã€‚å®¹é‡è¶…éæ™‚ã¯headã®æ¬¡ã‚’å‰Šé™¤

**æ™‚é–“è¨ˆç®—é‡:** O(1)  
**ç©ºé–“è¨ˆç®—é‡:** O(capacity)

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
LRUchache/
â”œâ”€â”€ README.md                      # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ PYTHON_GUIDE.md                # Pythonæ›¸ãæ–¹ã‚¬ã‚¤ãƒ‰
â”œâ”€â”€ lru_cache_ordereddict.py       # OrderedDictã‚’ä½¿ã£ãŸå®Ÿè£…
â”œâ”€â”€ lru_cache_doubly_linked.py    # åŒæ–¹å‘é€£çµãƒªã‚¹ãƒˆã‚’ä½¿ã£ãŸå®Ÿè£…
â”œâ”€â”€ test_lru_cache.py             # ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
â””â”€â”€ .tool-versions                 # Pythonãƒãƒ¼ã‚¸ãƒ§ãƒ³è¨­å®š
```

## å®Ÿè¡Œæ–¹æ³•

### åŸºæœ¬çš„ãªå®Ÿè¡Œ

```bash
# OrderedDictç‰ˆã‚’å®Ÿè¡Œ
python lru_cache_ordereddict.py

# åŒæ–¹å‘é€£çµãƒªã‚¹ãƒˆç‰ˆã‚’å®Ÿè¡Œ
python lru_cache_doubly_linked.py

# ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ
python test_lru_cache.py
```

### å„ãƒ•ã‚¡ã‚¤ãƒ«ã®èª¬æ˜

- **lru_cache_ordereddict.py**: ã‚·ãƒ³ãƒ—ãƒ«ã§å®Ÿç”¨çš„ãªå®Ÿè£…ã€‚ã‚³ãƒ¡ãƒ³ãƒˆä»˜ãã§å‹•ä½œã‚’èª¬æ˜
- **lru_cache_doubly_linked.py**: ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ç†è§£ã‚’æ·±ã‚ã‚‹å®Ÿè£…ã€‚åŒæ–¹å‘é€£çµãƒªã‚¹ãƒˆã®æ“ä½œã‚’è©³ã—ãèª¬æ˜
- **test_lru_cache.py**: LeetCodeã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã¨è¿½åŠ ã®ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ã‚’å«ã‚€

## ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®è©³ç´°

### LRUã®å‹•ä½œåŸç†

1. **æœ€è¿‘ä½¿ç”¨ã—ãŸè¦ç´ **: ã‚¢ã‚¯ã‚»ã‚¹ã•ã‚ŒãŸè¦ç´ ã¯ã€Œæœ€è¿‘ä½¿ç”¨ã€ã¨ã—ã¦ãƒãƒ¼ã‚¯ã•ã‚Œã‚‹
2. **å‰Šé™¤ã®å„ªå…ˆé †ä½**: å®¹é‡è¶…éæ™‚ã€æœ€ã‚‚å¤ãä½¿ã‚ã‚ŒãŸè¦ç´ ãŒå‰Šé™¤ã•ã‚Œã‚‹
3. **O(1)ã®å®Ÿç¾**: ãƒãƒƒã‚·ãƒ¥ãƒãƒƒãƒ—ã§O(1)ã‚¢ã‚¯ã‚»ã‚¹ã€é€£çµãƒªã‚¹ãƒˆã§O(1)ã®é †åºæ›´æ–°

### ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã®é¸æŠ

| ãƒ‡ãƒ¼ã‚¿æ§‹é€  | ç”¨é€” | æ™‚é–“è¨ˆç®—é‡ |
|-----------|------|-----------|
| ãƒãƒƒã‚·ãƒ¥ãƒãƒƒãƒ— | ã‚­ãƒ¼ã‹ã‚‰å€¤ã¸ã®O(1)ã‚¢ã‚¯ã‚»ã‚¹ | O(1) |
| OrderedDict | é †åºä»˜ãè¾æ›¸ã€O(1)ã§é †åºæ›´æ–° | O(1) |
| åŒæ–¹å‘é€£çµãƒªã‚¹ãƒˆ | ä½¿ç”¨é †åºã®ç®¡ç† | O(1) |

## å­¦ç¿’ãƒã‚¤ãƒ³ãƒˆ

### Pythonã®æ›¸ãæ–¹

- **ã‚¯ãƒ©ã‚¹å®šç¾©**: `class LRUCache:`
- **å‹ãƒ’ãƒ³ãƒˆ**: `def get(self, key: int) -> int:`
- **è¾æ›¸æ“ä½œ**: `cache[key]`, `cache.get(key, default)`, `key in cache`
- **OrderedDict**: `move_to_end()`, `popitem(last=False)`

è©³ã—ãã¯ **PYTHON_GUIDE.md** ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®ãƒã‚¤ãƒ³ãƒˆ

- **O(1)ã®å®Ÿç¾**: ãƒãƒƒã‚·ãƒ¥ãƒãƒƒãƒ—ã¨é€£çµãƒªã‚¹ãƒˆã®çµ„ã¿åˆã‚ã›
- **é †åºã®ç®¡ç†**: æœ€è¿‘ä½¿ã£ãŸè¦ç´ ã‚’æœ«å°¾ã«ç§»å‹•
- **å®¹é‡ç®¡ç†**: å…ˆé ­ã®è¦ç´ ã‚’å‰Šé™¤ã—ã¦å®¹é‡ã‚’ç¶­æŒ

## å‚è€ƒ

- [LeetCode 146. LRU Cache](https://leetcode.com/problems/lru-cache/)
- [Python collections.OrderedDict](https://docs.python.org/ja/3/library/collections.html#collections.OrderedDict)

